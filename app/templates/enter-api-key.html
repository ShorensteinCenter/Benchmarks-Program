{% extends "base.html" %}

{% block content %}
<div class="container content-block">
	<div class="row">
		<div class="col-12 col-lg-7 d-flex flex-column content-block">
			<h1 class="has-bottom-margin">Enter your MailChimp API key</h1>
			<form action="#" id="api-key-form" method="post" autocomplete="off" novalidate>
				<label for="news_org" {% if num_orgs == 1 %}class="disabled-elt" {% endif %}>News Organization</label>
				<div id="newsorg-input-wrapper" class="form-input-wrapper">
					{% if num_orgs == 1 %}
						{{ api_key_form.organization(class="custom-select disabled-elt") }}
					{% else %}
						{{ api_key_form.organization(class="custom-select") }}
					{% endif %}
					<span class="focus-bg"></span>
				</div>
				<label for="api_key">API Key</label>
				<svg data-toggle="popover" tabindex="0" role="button" data-trigger="focus" data-content="For more information on how MailChimp API keys work and where to find yours, please visit <a href='https://mailchimp.com/help/about-api-keys' target='_blank' rel='noopener'>MailChimp's page on API keys</a>." class="info-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="31.978" cy="50.363" r="2"/><path d="M31.533 13.38c-6.268 0-10.162 3.894-10.162 10.162a1 1 0 1 0 2 0c0-5.188 2.975-8.162 8.162-8.162 7.876 0 9.052 5.672 9.052 9.053 0 3.288-2.702 7.029-6.285 8.7-4.056 1.892-3.347 8.53-3.315 8.81a.999.999 0 1 0 1.987-.226c-.006-.055-.548-5.501 2.174-6.77 4.31-2.012 7.439-6.434 7.439-10.514 0-6.921-4.132-11.053-11.052-11.053z"/><path d="M32 0C14.327 0 0 14.327 0 32s14.327 32 32 32 32-14.327 32-32S49.673 0 32 0zm0 62C15.458 62 2 48.542 2 32S15.458 2 32 2s30 13.458 30 30-13.458 30-30 30z"/></svg>
				<div id="api-key-input-wrapper" class="form-input-wrapper">
					{{ api_key_form.key(custom_type="key") }}
					<span class="focus-bg"></span>
				</div>
				<div class="custom-control custom-checkbox">
					{{ api_key_form.store_aggregates(type="checkbox", class="custom-control-input", checked="true") }}
					<label class="custom-control-label" for="store_aggregates">Store this API key, and use my aggregate MailChimp data for benchmarking</label><svg data-toggle="popover" tabindex="0" role="button" data-trigger="focus" data-content="By opting-in to this feature, you allow us to include your data in the aggregated and anonymized benchmarking portion of our email metrics. In other words, your data will be counted in the averages that help us calculate industry-wide email newsletter benchmarks. For more information on how we store your data, please read our <a href='/privacy'>Privacy Policy</a>." class="info-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="31.978" cy="50.363" r="2"/><path d="M31.533 13.38c-6.268 0-10.162 3.894-10.162 10.162a1 1 0 1 0 2 0c0-5.188 2.975-8.162 8.162-8.162 7.876 0 9.052 5.672 9.052 9.053 0 3.288-2.702 7.029-6.285 8.7-4.056 1.892-3.347 8.53-3.315 8.81a.999.999 0 1 0 1.987-.226c-.006-.055-.548-5.501 2.174-6.77 4.31-2.012 7.439-6.434 7.439-10.514 0-6.921-4.132-11.053-11.052-11.053z"/><path d="M32 0C14.327 0 0 14.327 0 32s14.327 32 32 32 32-14.327 32-32S49.673 0 32 0zm0 62C15.458 62 2 48.542 2 32S15.458 2 32 2s30 13.458 30 30-13.458 30-30 30z"/></svg>
				</div>
				<div class="custom-control custom-checkbox">
					{{ api_key_form.monthly_updates(type="checkbox", class="custom-control-input", checked="true") }}
					<label class="custom-control-label" for="monthly_updates">Store this API key, and send me monthly benchmarking updates</label><svg data-toggle="popover" tabindex="0" role="button" data-trigger="focus" data-content="By opting-in to this feature, you allow us to  automatically run this tool through your list each month and send you an updated monthly metrics report. For more information on how we store your data, please read our <a href='/privacy'>Privacy Policy</a>." class="info-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="31.978" cy="50.363" r="2"/><path d="M31.533 13.38c-6.268 0-10.162 3.894-10.162 10.162a1 1 0 1 0 2 0c0-5.188 2.975-8.162 8.162-8.162 7.876 0 9.052 5.672 9.052 9.053 0 3.288-2.702 7.029-6.285 8.7-4.056 1.892-3.347 8.53-3.315 8.81a.999.999 0 1 0 1.987-.226c-.006-.055-.548-5.501 2.174-6.77 4.31-2.012 7.439-6.434 7.439-10.514 0-6.921-4.132-11.053-11.052-11.053z"/><path d="M32 0C14.327 0 0 14.327 0 32s14.327 32 32 32 32-14.327 32-32S49.673 0 32 0zm0 62C15.458 62 2 48.542 2 32S15.458 2 32 2s30 13.458 30 30-13.458 30-30 30z"/></svg>
				</div>
				<div class="form-submit-wrapper">
					{{ api_key_form.submit() }}
				</div>
			</form>
		</div>
		<div class="col-12 col-lg-4 offset-lg-1">
			<div class="bordered has-bottom-margin">
				<h2 class="has-bottom-margin">How do we use your data?</h2>
				<p>We will use your API key to access MailChimp and request list data. We perform a number of calculations on this raw data, and use the calculation results to generate the email report we send to you. We do not store any raw data, nor do we request any personally-idenitifying information about your list members. You may choose how we store your API key and the calculation results:
				<p>If you check either box, we will securely store your API key. You will be able to generate new, up-to-date reports instantly.</p>
				<p>You can choose to contribute your data to a "Database Average" or to receive an up-to-date email report every month.</p>
				<p>If you uncheck both boxes, we will send you a report and then discard your list data. New reports will not be instantly generated.</p>
				<p>For more information about how we use your data, see our <a href="/privacy">Privacy Policy</a>.</p>
			</div>
		</div>
	</div>
</div>
{% endblock %}